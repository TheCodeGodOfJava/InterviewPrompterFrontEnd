<!-- transcript.component.html -->
<mat-card class="transcript-card">
  <mat-card-header>
    <mat-card-title>Live Ukrainian Speech Transcript</mat-card-title>
    <mat-card-subtitle>Real-time recognition + editable words</mat-card-subtitle>
  </mat-card-header>

  <mat-card-content>
    <!-- Loading / Error states -->
    @if (isLoading) {
      <div class="loading">
        <mat-spinner diameter="48"></mat-spinner>
        <p>Loading transcript...</p>
      </div>
    }

    @if (errorMessage) {
      <div class="error">
        <mat-icon>error_outline</mat-icon>
        <p>{{ errorMessage }}</p>
      </div>
    }

    <!-- Main content -->
    @if (!isLoading && !errorMessage) {
      <!-- Removable chips -->
      <mat-chip-listbox class="word-chips" aria-label="Transcript words">
        @for (entry of words(); track entry.index) {
          <mat-chip-option color="primary" selected>
            {{ entry.word }}
            <button matChipRemove aria-label="'remove word'">
              <mat-icon>cancel</mat-icon>
            </button>
          </mat-chip-option>
        }

        @if (isEmpty()) {
          <mat-chip disabled>Waiting for speech...</mat-chip>
        }
      </mat-chip-listbox>     

      <!-- Status bar -->
      <div class="status">
        <span>Words: {{ wordCount() }}</span>
        <span> â€¢ Version: {{ transcriptSignal().version }}</span>
      </div>
    }
  </mat-card-content>
</mat-card>